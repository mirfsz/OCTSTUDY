{% extends "base.html" %}

{% block title %}Cheat Sheets - SPF Study Coach{% endblock %}

{% block content %}
<div class="px-4 py-6 sm:px-0">
    <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Cheat Sheets</h1>
        <p class="mt-2 text-gray-600 dark:text-gray-400">Quick reference cards for key concepts</p>
    </div>

    <!-- Topic Filter -->
    <div class="mb-6">
        <div class="flex flex-wrap gap-2">
            <a href="{{ url_for('cheats') }}" class="px-3 py-1 rounded-full text-sm font-medium {% if current_topic == 'all' %}bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200{% else %}bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600{% endif %}">
                All Topics
            </a>
            {% for topic in topics %}
            <a href="{{ url_for('cheats', topic=topic) }}" class="px-3 py-1 rounded-full text-sm font-medium {% if current_topic == topic %}bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200{% else %}bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600{% endif %}">
                {{ topic }}
            </a>
            {% endfor %}
        </div>
    </div>

    {% if flashcards %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for card in flashcards %}
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
            <div class="p-4">
                <div class="flex items-center justify-between mb-3">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                        {{ card.topic_name }}
                    </span>
                    <button class="flip-card-btn p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300" data-card-id="{{ card.id }}">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="card-content">
                    <div class="card-front">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">{{ card.front }}</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Click to reveal answer</p>
                    </div>
                    <div class="card-back hidden">
                        <div class="text-gray-700 dark:text-gray-300 whitespace-pre-line">{{ card.back }}</div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Study Tips -->
    <div class="mt-8 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6">
        <h3 class="text-lg font-medium text-green-900 dark:text-green-100 mb-2">Flashcard Study Tips</h3>
        <ul class="text-sm text-green-800 dark:text-green-200 space-y-1">
            <li>• Click the flip icon to reveal answers</li>
            <li>• Test yourself before revealing answers</li>
            <li>• Focus on cards you find difficult</li>
            <li>• Review regularly for better retention</li>
        </ul>
    </div>

    {% else %}
    <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No flashcards available</h3>
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Check back later for new content.</p>
    </div>
    {% endif %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const flipButtons = document.querySelectorAll('.flip-card-btn');
    
    flipButtons.forEach(button => {
        button.addEventListener('click', function() {
            const cardContent = this.closest('.bg-white').querySelector('.card-content');
            const front = cardContent.querySelector('.card-front');
            const back = cardContent.querySelector('.card-back');
            
            if (front.classList.contains('hidden')) {
                // Show front
                front.classList.remove('hidden');
                back.classList.add('hidden');
            } else {
                // Show back
                front.classList.add('hidden');
                back.classList.remove('hidden');
            }
        });
    });
});
</script>
{% endblock %}
